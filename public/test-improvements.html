<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Template Improvements Diagnostic</title>
  <link rel="stylesheet" href="./styles.css?v=2">
  <style>
    body { padding: 40px; max-width: 1200px; margin: 0 auto; }
    .test-section { 
      margin: 40px 0; 
      padding: 30px; 
      border: 2px solid var(--color-primary);
      border-radius: var(--radius);
      background: var(--color-surface);
    }
    .success { border-color: #10b981; background: rgba(16, 185, 129, 0.1); }
    .error { border-color: #ef4444; background: rgba(239, 68, 68, 0.1); }
    h1, h2, h3 { color: var(--color-text); }
    .code { 
      background: var(--color-bg); 
      padding: 15px; 
      border-radius: 8px; 
      margin: 10px 0;
      font-family: monospace;
      color: var(--color-primary);
    }
    .badge { 
      display: inline-block;
      padding: 8px 16px;
      border-radius: 6px;
      margin: 5px;
      font-weight: 600;
    }
    .badge.success { background: #10b981; color: white; }
    .badge.error { background: #ef4444; color: white; }
  </style>
</head>
<body>
  <h1>üîç Template Improvements Diagnostic</h1>
  <p style="color: var(--color-muted);">This page tests if all the new template features are working correctly.</p>

  <!-- Test 1: CSS Loaded -->
  <div class="test-section" id="css-test">
    <h2>1. CSS Test</h2>
    <p>Testing if new styles are loaded...</p>
    <div id="css-result"></div>
  </div>

  <!-- Test 2: Stats Display -->
  <div class="test-section">
    <h2>2. Stats Display Test</h2>
    <p>This is what the stats section should look like:</p>
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-number">500+</div>
        <div class="stat-label">Clients Served</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">10</div>
        <div class="stat-label">Years Experience</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">4.9</div>
        <div class="stat-label">Star Rating</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">100%</div>
        <div class="stat-label">Satisfaction</div>
      </div>
    </div>
    <p style="margin-top: 20px; color: var(--color-muted);">
      ‚úÖ <strong>If you see 4 large numbers above with hover effects</strong>, stats are working!<br>
      ‚ùå <strong>If you see plain text or broken layout</strong>, CSS didn't load properly.
    </p>
  </div>

  <!-- Test 3: Accordion -->
  <div class="test-section">
    <h2>3. FAQ Accordion Test</h2>
    <p>Click questions below to test accordion:</p>
    <div class="accordion">
      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleTest(this)">
          <span>Does the accordion work?</span>
          <span class="accordion-icon">‚ñº</span>
        </div>
        <div class="accordion-content">
          <p>If you can read this after clicking, the accordion is working! ‚úÖ</p>
        </div>
      </div>
      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleTest(this)">
          <span>Can I click multiple items?</span>
          <span class="accordion-icon">‚ñº</span>
        </div>
        <div class="accordion-content">
          <p>The previous one should close when you open this one. That's the expected behavior.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Test 4: Badges -->
  <div class="test-section">
    <h2>4. Badge System Test</h2>
    <p>These badges should have gradient backgrounds:</p>
    <span class="badge badge-popular">Popular</span>
    <span class="badge badge-new">New</span>
    <span class="badge badge-verified">Verified</span>
    <p style="margin-top: 20px; color: var(--color-muted);">
      ‚úÖ <strong>If badges have orange, green, blue gradients</strong>, badge system works!<br>
      ‚ùå <strong>If they're plain or no colors</strong>, CSS issue.
    </p>
  </div>

  <!-- Test 5: Credentials -->
  <div class="test-section">
    <h2>5. Credentials Grid Test</h2>
    <div class="credentials-grid">
      <div class="credential-badge">
        <div class="credential-icon">üõ°Ô∏è</div>
        <h3 class="credential-name">Licensed</h3>
        <p class="credential-desc muted">Fully certified</p>
      </div>
      <div class="credential-badge">
        <div class="credential-icon">‚úÖ</div>
        <h3 class="credential-name">Verified</h3>
        <p class="credential-desc muted">Background checked</p>
      </div>
      <div class="credential-badge">
        <div class="credential-icon">üèÜ</div>
        <h3 class="credential-name">Award Winning</h3>
        <p class="credential-desc muted">Best of 2023</p>
      </div>
      <div class="credential-badge">
        <div class="credential-icon">üíØ</div>
        <h3 class="credential-name">Guaranteed</h3>
        <p class="credential-desc muted">100% satisfaction</p>
      </div>
    </div>
    <p style="margin-top: 20px; color: var(--color-muted);">
      ‚úÖ <strong>If you see 4 cards in a grid with hover effects</strong>, credentials work!
    </p>
  </div>

  <!-- Test 6: Process Timeline -->
  <div class="test-section">
    <h2>6. Process Timeline Test</h2>
    <div class="process-timeline">
      <div class="process-step">
        <div class="process-number">1</div>
        <div class="process-content">
          <h3>First Step</h3>
          <p class="muted">This is the first step in the process</p>
        </div>
      </div>
      <div class="process-step">
        <div class="process-number">2</div>
        <div class="process-content">
          <h3>Second Step</h3>
          <p class="muted">This is the second step</p>
        </div>
      </div>
      <div class="process-step">
        <div class="process-number">3</div>
        <div class="process-content">
          <h3>Third Step</h3>
          <p class="muted">Final step in the process</p>
        </div>
      </div>
    </div>
    <p style="margin-top: 20px; color: var(--color-muted);">
      ‚úÖ <strong>If you see numbered circles with content</strong>, timeline works!
    </p>
  </div>

  <!-- Test 7: JavaScript Functions -->
  <div class="test-section" id="js-test">
    <h2>7. JavaScript Functions Test</h2>
    <p>Checking if new rendering functions exist...</p>
    <div id="js-result"></div>
  </div>

  <!-- Test 8: Template Data -->
  <div class="test-section" id="data-test">
    <h2>8. Template Data Test</h2>
    <p>Checking if cleaning template has new sections...</p>
    <div id="data-result"></div>
  </div>

  <!-- Results Summary -->
  <div class="test-section">
    <h2>‚úÖ Next Steps</h2>
    <p><strong>If all tests above passed:</strong></p>
    <div class="code">
      Go to: <a href="/?template=cleaning" target="_blank">/?template=cleaning</a>
    </div>
    <p>And look for these sections (in order):</p>
    <ol>
      <li>Hero (existing)</li>
      <li><strong>STATS</strong> - 4 big numbers (NEW)</li>
      <li>Services grid</li>
      <li>About section</li>
      <li><strong>PROCESS</strong> - Numbered timeline (NEW)</li>
      <li><strong>CREDENTIALS</strong> - 4 badges (NEW)</li>
      <li><strong>TESTIMONIALS</strong> - With star ratings (ENHANCED)</li>
      <li><strong>FAQ</strong> - Accordion questions (NEW)</li>
      <li>Contact section</li>
      <li>Footer</li>
    </ol>

    <p style="margin-top: 30px;"><strong>If tests failed:</strong></p>
    <ul>
      <li>Hard refresh your browser: <code>Cmd+Shift+R</code> (Mac) or <code>Ctrl+Shift+R</code> (Windows)</li>
      <li>Make sure server is running on port 3000</li>
      <li>Check browser console (F12) for errors</li>
    </ul>
  </div>

  <script>
    // Test CSS
    function testCSS() {
      const statsGrid = document.querySelector('.stats-grid');
      const computedStyle = window.getComputedStyle(statsGrid);
      const display = computedStyle.display;
      const resultDiv = document.getElementById('css-result');
      
      if (display === 'grid') {
        resultDiv.innerHTML = '<span class="badge success">‚úÖ CSS Loaded</span><p>New styles are active!</p>';
        document.getElementById('css-test').classList.add('success');
      } else {
        resultDiv.innerHTML = '<span class="badge error">‚ùå CSS Not Loaded</span><p>Hard refresh your browser!</p>';
        document.getElementById('css-test').classList.add('error');
      }
    }

    // Test JavaScript
    async function testJS() {
      const resultDiv = document.getElementById('js-result');
      let passed = 0;
      let total = 7;
      
      const response = await fetch('/app.js');
      const jsCode = await response.text();
      
      const functions = [
        'renderStats',
        'renderFAQ',
        'renderCredentials',
        'renderProcess',
        'renderTeam',
        'renderTestimonialsAdvanced',
        'renderProductsEnhanced'
      ];
      
      let html = '<ul>';
      functions.forEach(fn => {
        if (jsCode.includes(`function ${fn}`)) {
          html += `<li>‚úÖ ${fn}()</li>`;
          passed++;
        } else {
          html += `<li>‚ùå ${fn}() - Missing!</li>`;
        }
      });
      html += '</ul>';
      
      if (passed === total) {
        resultDiv.innerHTML = `<span class="badge success">‚úÖ All ${total} functions found</span>` + html;
        document.getElementById('js-test').classList.add('success');
      } else {
        resultDiv.innerHTML = `<span class="badge error">‚ùå ${passed}/${total} functions found</span>` + html;
        document.getElementById('js-test').classList.add('error');
      }
    }

    // Test Template Data
    async function testData() {
      const resultDiv = document.getElementById('data-result');
      
      try {
        const response = await fetch('/data/templates/cleaning.json');
        const data = await response.json();
        
        let passed = 0;
        let total = 4;
        
        let html = '<ul>';
        if (data.stats) { html += '<li>‚úÖ stats section</li>'; passed++; } else { html += '<li>‚ùå stats missing</li>'; }
        if (data.credentials) { html += '<li>‚úÖ credentials section</li>'; passed++; } else { html += '<li>‚ùå credentials missing</li>'; }
        if (data.process) { html += '<li>‚úÖ process section</li>'; passed++; } else { html += '<li>‚ùå process missing</li>'; }
        if (data.faq) { html += '<li>‚úÖ faq section</li>'; passed++; } else { html += '<li>‚ùå faq missing</li>'; }
        html += '</ul>';
        
        if (passed === total) {
          resultDiv.innerHTML = `<span class="badge success">‚úÖ All ${total} sections found</span>` + html;
          document.getElementById('data-test').classList.add('success');
        } else {
          resultDiv.innerHTML = `<span class="badge error">‚ùå ${passed}/${total} sections found</span>` + html;
          document.getElementById('data-test').classList.add('error');
        }
      } catch (err) {
        resultDiv.innerHTML = `<span class="badge error">‚ùå Error loading template</span><p>${err.message}</p>`;
        document.getElementById('data-test').classList.add('error');
      }
    }

    // Accordion toggle
    function toggleTest(header) {
      const item = header.parentElement;
      const content = item.querySelector('.accordion-content');
      const icon = header.querySelector('.accordion-icon');
      const isOpen = content.classList.contains('open');
      
      // Close all
      document.querySelectorAll('.accordion-content').forEach(c => c.classList.remove('open'));
      document.querySelectorAll('.accordion-icon').forEach(i => i.textContent = '‚ñº');
      
      // Open clicked one if it was closed
      if (!isOpen) {
        content.classList.add('open');
        icon.textContent = '‚ñ≤';
      }
    }

    // Run tests on load
    window.addEventListener('DOMContentLoaded', () => {
      testCSS();
      testJS();
      testData();
    });
  </script>
</body>
</html>

