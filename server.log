[dotenv@17.2.3] injecting env (18) from .env -- tip: ğŸ”‘ add access controls to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ” prevent committing .env to code: https://dotenvx.com/precommit
âœ… Google OAuth configured
ğŸ“ Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
âœ… Google OAuth routes configured
ğŸš€ Running initial trial expiration check...
ğŸ” Checking for trial expirations...
Server running on http://localhost:3000
âœ… Trial expiration check complete
âœ… Database connected successfully
Query executed: { text: 'SELECT NOW()', duration: 218, rows: 1 }
âœ… Database connection test successful: { now: 2025-11-03T23:52:52.973Z }
ğŸš€ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
ğŸš€ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
ğŸš€ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
ğŸš€ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
ğŸ¯ CALLBACK HIT - Starting passport authentication...
âœ… Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 2663,
  rows: 1
}
Database query error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
Google OAuth error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
ğŸ¯ Passport authenticate callback fired
Error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
User: NO USER
Info: undefined
âŒ Passport authentication error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
ğŸš€ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
ğŸš€ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
ğŸ¯ CALLBACK HIT - Starting passport authentication...
âœ… Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 144,
  rows: 1
}
Database query error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
Google OAuth error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
ğŸ¯ Passport authenticate callback fired
Error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
User: NO USER
Info: undefined
âŒ Passport authentication error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
