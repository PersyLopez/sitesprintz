[dotenv@17.2.3] injecting env (18) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
‚úÖ Google OAuth configured
üìç Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
‚úÖ Google OAuth routes configured
üöÄ Running initial trial expiration check...
üîç Checking for trial expirations...
Server running on http://localhost:3000
Error processing site flow-boutique-fitness: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/flow-boutique-fitness/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/flow-boutique-fitness/site.json'
}
Error processing site harbor-bistro: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/harbor-bistro/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/harbor-bistro/site.json'
}
Error processing site my-site: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/my-site/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/my-site/site.json'
}
Error processing site my-site-0d787wo6w: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/my-site-0d787wo6w/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/my-site-0d787wo6w/site.json'
}
Error processing site sparkle-home-cleaning: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/sparkle-home-cleaning/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/sparkle-home-cleaning/site.json'
}
Error processing site the-grand-table: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/the-grand-table/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/the-grand-table/site.json'
}
‚úÖ Trial expiration check complete
‚úÖ Database connected successfully
Query executed: { text: 'SELECT NOW()', duration: 3031, rows: 1 }
‚úÖ Database connection test successful: { now: 2025-11-04T12:11:23.531Z }
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 172,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 748,
  rows: 1
}
Created subscription checkout session for persylopez9@gmail.com, plan: pro, session: cs_test_b18I3WTGnZdn4ZbSHOJb8XMMzMqTubCeLv0kvDL4jR7sM272S36dXvfkJd
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 654,
  rows: 1
}
Query executed: {
  text: 'SELECT id FROM users WHERE email = $1',
  duration: 29,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      INSERT INTO sites (\n' +
    '        id, user_id, subdomain, template_id, status, plan,\n' +
    '        publis',
  duration: 38,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 158,
  rows: 1
}
Created subscription checkout session for persylopez9@gmail.com, plan: pro, session: cs_test_b1apbnAD6EUAWetuqy6kWIFdG7L8UuzmVkDL0FEOGnibgvYHaPNsTsKf3L
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 626,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 31,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 164,
  rows: 0
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 36, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 36,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjYzODQ1LCJleHAiOjE3NjI4Njg2NDV9.EFUL6nkxLThSL8g2SvDXqNlb8ejnMFYbgD0-0m1Ftds
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 21,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 48,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 128,
  rows: 1
}
Query executed: {
  text: 'SELECT id FROM users WHERE email = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      INSERT INTO sites (\n' +
    '        id, user_id, subdomain, template_id, status, plan,\n' +
    '        publis',
  duration: 28,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 138,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 146,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 54,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 15,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT subdomain FROM sites WHERE id = $1 AND user_id = $2',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'DELETE FROM sites WHERE id = $1 AND user_id = $2',
  duration: 38,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 27,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 168,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 30,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 148,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT subdomain FROM sites WHERE id = $1 AND user_id = $2',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'DELETE FROM sites WHERE id = $1 AND user_id = $2',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 4
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 4
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT subdomain FROM sites WHERE id = $1 AND user_id = $2',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'DELETE FROM sites WHERE id = $1 AND user_id = $2',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 116,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 158,
  rows: 3
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 15,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 16,
  rows: 3
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT subdomain FROM sites WHERE id = $1 AND user_id = $2',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'DELETE FROM sites WHERE id = $1 AND user_id = $2',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 2
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 2
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 1885,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 29,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 152,
  rows: 0
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 39, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 37,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjY0NDYwLCJleHAiOjE3NjI4NjkyNjB9.Ctyp0Um-z9eLckgI5cbEglZCdaCeJsDqmOuyr7IK-DA
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 42,
  rows: 2
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 2
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 137,
  rows: 1
}
Query executed: {
  text: 'SELECT id FROM users WHERE email = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      INSERT INTO sites (\n' +
    '        id, user_id, subdomain, template_id, status, plan,\n' +
    '        publis',
  duration: 29,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 134,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 141,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 3
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 3
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 168,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 137,
  rows: 0
}
‚è∞ Running scheduled trial expiration check...
üîç Checking for trial expirations...
Error processing site flow-boutique-fitness: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/flow-boutique-fitness/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/flow-boutique-fitness/site.json'
}
Error processing site freshbowl: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/freshbowl/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/freshbowl/site.json'
}
Error processing site my-site: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/my-site/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/my-site/site.json'
}
Error processing site my-site-0d787wo6w: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/my-site-0d787wo6w/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/my-site-0d787wo6w/site.json'
}
Error processing site the-grand-table: Error: ENOENT: no such file or directory, open '/Users/admin/active-directory-website/public/sites/the-grand-table/site.json'
    at async open (node:internal/fs/promises:640:25)
    at async Object.readFile (node:internal/fs/promises:1277:14)
    at async checkTrialExpirations (file:///Users/admin/active-directory-website/server.js:4493:37) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'open',
  path: '/Users/admin/active-directory-website/public/sites/the-grand-table/site.json'
}
‚úÖ Trial expiration check complete
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 162,
  rows: 1
}
Query executed: {
  text: 'SELECT id FROM users WHERE email = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      INSERT INTO sites (\n' +
    '        id, user_id, subdomain, template_id, status, plan,\n' +
    '        publis',
  duration: 18,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 137,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 134,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 19,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjY1MDE4LCJleHAiOjE3NjI4Njk4MTh9.rSK6zb5rDe9MMStYvZQppXMKelQIJtg5fEiD605T7FI
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 143,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 4
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 4
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 148,
  rows: 1
}
Query executed: {
  text: 'SELECT id FROM users WHERE email = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      INSERT INTO sites (\n' +
    '        id, user_id, subdomain, template_id, status, plan,\n' +
    '        publis',
  duration: 19,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 154,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 19,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: publish
Pending plan: undefined
‚úÖ REDIRECTING TO: /auto-publish.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjY1MTk4LCJleHAiOjE3NjI4Njk5OTh9.c3emu-sQ6F24YwqVPgKniQJqIGonHZ9orFLMINv2THU
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 134,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 32,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 17,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 3316,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 3324,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 21,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 38,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 22,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 21,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 144,
  rows: 1
}
Query executed: {
  text: 'SELECT id FROM users WHERE email = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      INSERT INTO sites (\n' +
    '        id, user_id, subdomain, template_id, status, plan,\n' +
    '        publis',
  duration: 21,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 6142,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 170,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: publish
Pending plan: undefined
‚úÖ REDIRECTING TO: /auto-publish.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjY2NDkyLCJleHAiOjE3NjI4NzEyOTJ9.wmWEnfse2VYOBx2My_djLhiNBddk92ZRktWwO26UrwY
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 31,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 163,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 47,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 15,
  rows: 1
}
[2025-11-05T14:10:08.223Z] [PID: 25921] [32m[NODE-CRON][32m [33m[WARN][0m missed execution at Wed Nov 05 2025 09:00:00 GMT-0500 (Eastern Standard Time)! Possible blocking IO or high CPU user at the same process used by node-cron.
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 669,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 162,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 159,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 50,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 36,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 595,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE id = $1',
  duration: 43,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 133,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 155,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 38,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 161,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 160,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 23,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 17,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 1883,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE id = $1',
  duration: 41,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 137,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 143,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 35,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 38,
  rows: 0
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 4370,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 34,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMzY5Mjg5LCJleHAiOjE3NjI5NzQwODl9.JJI-4eVyuM46ugG7-Tf77Q67yUnOS4PzPuE9G2hdHSE
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 22,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 142,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 60,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 154,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 19,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMzY5MzE2LCJleHAiOjE3NjI5NzQxMTZ9.Y0JUCOeDEQaWMqusGsl-gxguZv0V-nl0JVZ_yVPggkA
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 131,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 40,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 22,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 27,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 140,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 135,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 135,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 6301,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 6303,
  rows: 1
}
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 44, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE id = $1',
  duration: 33,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 34,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 33,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 156,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 156,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 17,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 17,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 23,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 23,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 132,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 132,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 137,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 141,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 162,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 159,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 0
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 636,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 33,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMzcwNTc2LCJleHAiOjE3NjI5NzUzNzZ9.Y8POhqm57Zsbh1JuJ8nKGE_aaVhITLA0jjeIuHAW9qo
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 127,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 52,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 171,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE id = $1',
  duration: 26,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 151,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 16,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 2984,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 2988,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 157,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 161,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 68,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 59,
  rows: 0
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 33, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 43,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMzcxNTI1LCJleHAiOjE3NjI5NzYzMjV9.q3NfCVqSVz2tS3k-afN_Ea7wgGTy9oaRis_2vM8CUHU
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 22,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 21,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 24,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 145,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 17,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMzcxNTcxLCJleHAiOjE3NjI5NzYzNzF9._zE5qnXLAMnge1Oft5ok6YP9N6lBnvqPmO2-o-hNRaA
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 33,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 155,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 36,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 21,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 135,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 18,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMzcxNTg5LCJleHAiOjE3NjI5NzYzODl9.zHhSq4q8Ey9OWb8EI8On8r9kOG3kvSf-EEcWzQ-3v-c
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 37,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 141,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 36,
  rows: 6
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 21,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT subdomain FROM sites WHERE id = $1 AND user_id = $2',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'DELETE FROM sites WHERE id = $1 AND user_id = $2',
  duration: 40,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 36,
  rows: 5
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 5
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 134,
  rows: 1
}
Query executed: {
  text: 'SELECT subdomain FROM sites WHERE id = $1 AND user_id = $2',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'DELETE FROM sites WHERE id = $1 AND user_id = $2',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 4
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 4
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 122,
  rows: 1
}
Query executed: {
  text: 'SELECT subdomain FROM sites WHERE id = $1 AND user_id = $2',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'DELETE FROM sites WHERE id = $1 AND user_id = $2',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 3
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 3
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 133,
  rows: 1
}
Query executed: {
  text: 'SELECT id FROM users WHERE email = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      INSERT INTO sites (\n' +
    '        id, user_id, subdomain, template_id, status, plan,\n' +
    '        publis',
  duration: 31,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 1928,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 42,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 2687,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 143,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 151,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 3181,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 3666,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 179,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE id = $1',
  duration: 36,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 214,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 213,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 41,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 42,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 161,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 164,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 16,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 17,
  rows: 0
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 709,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 1136,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 631,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 635,
  rows: 1
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 663,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 669,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 3753,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 33,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMzc3NTkxLCJleHAiOjE3NjI5ODIzOTF9.1NVgHssoCVyNT5d7hk1AlRe-t-LYWCLvoRJI7cWUTWU
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 24,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 141,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 53,
  rows: 4
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 4
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 19, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE id = $1',
  duration: 21,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 148,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 151,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 151,
  rows: 0
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 154,
  rows: 0
}
‚úÖ Database connected successfully
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 166,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 169,
  rows: 1
}
‚ùå Unexpected database error: Error: Connection terminated unexpectedly
    at Connection.<anonymous> (/Users/admin/active-directory-website/node_modules/pg/lib/client.js:136:73)
    at Object.onceWrapper (node:events:621:28)
    at Connection.emit (node:events:507:28)
    at Socket.<anonymous> (/Users/admin/active-directory-website/node_modules/pg/lib/connection.js:62:12)
    at Socket.emit (node:events:519:35)
    at TCP.<anonymous> (node:net:346:12) {
  client: Client {
    _events: [Object: null prototype] { error: [Function (anonymous)] },
    _eventsCount: 1,
    _maxListeners: undefined,
    connectionParameters: ConnectionParameters {
      user: 'neondb_owner',
      database: 'neondb',
      port: 5432,
      host: 'ep-noisy-truth-ahtau3k1-pooler.c-3.us-east-1.aws.neon.tech',
      binary: false,
      options: undefined,
      ssl: {},
      client_encoding: '',
      replication: undefined,
      isDomainSocket: false,
      application_name: undefined,
      fallback_application_name: undefined,
      statement_timeout: false,
      lock_timeout: false,
      idle_in_transaction_session_timeout: false,
      query_timeout: false,
      connect_timeout: 0
    },
    user: 'neondb_owner',
    database: 'neondb',
    port: 5432,
    host: 'ep-noisy-truth-ahtau3k1-pooler.c-3.us-east-1.aws.neon.tech',
    replication: undefined,
    _Promise: [Function: Promise],
    _types: TypeOverrides { _types: [Object], text: {}, binary: {} },
    _ending: true,
    _ended: true,
    _connecting: false,
    _connected: true,
    _connectionError: false,
    _queryable: false,
    enableChannelBinding: false,
    connection: Connection {
      _events: [Object: null prototype],
      _eventsCount: 23,
      _maxListeners: undefined,
      stream: [TLSSocket],
      _keepAlive: false,
      _keepAliveInitialDelayMillis: 0,
      lastBuffer: false,
      parsedStatements: {},
      ssl: {},
      _ending: true,
      _emitMessage: false,
      _connecting: true,
      Symbol(shapeMode): false,
      Symbol(kCapture): false
    },
    queryQueue: [],
    binary: false,
    processID: 454595777,
    secretKey: 415071494,
    ssl: {},
    _connectionTimeoutMillis: 0,
    _connectionCallback: null,
    saslSession: null,
    release: [Function (anonymous)],
    activeQuery: null,
    readyForQuery: true,
    hasExecuted: true,
    _poolUseCount: 1,
    Symbol(shapeMode): false,
    Symbol(kCapture): false
  }
}
