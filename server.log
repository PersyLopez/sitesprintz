[dotenv@17.2.3] injecting env (18) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ Google OAuth configured
üìç Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
‚úÖ Google OAuth routes configured
üöÄ Running initial trial expiration check...
üîç Checking for trial expirations...
Server running on http://localhost:3000
‚úÖ Trial expiration check complete
‚úÖ Database connected successfully
Query executed: { text: 'SELECT NOW()', duration: 218, rows: 1 }
‚úÖ Database connection test successful: { now: 2025-11-03T23:52:52.973Z }
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 2663,
  rows: 1
}
Database query error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
Google OAuth error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
üéØ Passport authenticate callback fired
Error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
User: NO USER
Info: undefined
‚ùå Passport authentication error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 144,
  rows: 1
}
Database query error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
Google OAuth error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
üéØ Passport authenticate callback fired
Error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
User: NO USER
Info: undefined
‚ùå Passport authentication error: error: column "google_id" of relation "users" does not exist
    at /Users/admin/active-directory-website/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async query (file:///Users/admin/active-directory-website/database/db.js:28:17)
    at async Strategy._verify (file:///Users/admin/active-directory-website/auth-google.js:54:11) {
  length: 129,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '18',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'analyze.c',
  line: '2528',
  routine: 'transformUpdateTargetList'
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 152,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET google_id = $1, picture = $2, last_login = NOW() WHERE email = $3',
  duration: 22,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjE0MjI3LCJleHAiOjE3NjI4MTkwMjd9.UNH4He9X6EvGV0RIbu_dBea0IrP1iZqyJXsUwMH5cQE
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 134,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 29,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 130,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 17,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjE0MjUxLCJleHAiOjE3NjI4MTkwNTF9.qhoMRhjH_1WEZet05hEaYTwCB8GVz95YiqeoLUJaMf0
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 122,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 15,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 16,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 15,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 16,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 16,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 151,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT * FROM users WHERE email = $1',
  duration: 141,
  rows: 1
}
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 17,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjE0MzQ0LCJleHAiOjE3NjI4MTkxNDR9.vSZOOGgvZQ73rOvkEksGIqB7RHFqQ76KUa7FjnbUiTU
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
‚úÖ Database connected successfully
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 144,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 20,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 21,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 27, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 19,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjE0MzUwLCJleHAiOjE3NjI4MTkxNTB9.aXigEZzPZkDUBACYmGYfwiWsNFdnV3Yqp33yPO4CZXo
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 21,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 35,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 22, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 20,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjE0MzU2LCJleHAiOjE3NjI4MTkxNTZ9.ZkmFsu5MLSC_3InPRymmGfhMM7juskwVMUTMagovkK0
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 19, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 19,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjE0MzYyLCJleHAiOjE3NjI4MTkxNjJ9.SqhdnTJbRau-ifWPYFL-YeveuwkSEVJA58GrQQtI6vU
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 17,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 22,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
üöÄ Initiating Google OAuth...
Callback URL: https://tenurial-subemarginate-fay.ngrok-free.dev/auth/google/callback
üéØ CALLBACK HIT - Starting passport authentication...
Query executed: { text: 'SELECT * FROM users WHERE email = $1', duration: 21, rows: 1 }
Query executed: {
  text: 'UPDATE users SET last_login = NOW() WHERE email = $1',
  duration: 20,
  rows: 1
}
üéØ Passport authenticate callback fired
Error: null
User: persylopez9@gmail.com
Info: {}
üî•üî•üî• OAUTH CALLBACK FIRED üî•üî•üî•
User email: persylopez9@gmail.com
User ID: c9ff275b-45f0-4d4b-90c8-55ac98819e43
User role: user
Token generated: eyJhbGciOiJIUzI1NiIs...
üîç Checking redirect logic...
Pending intent: undefined
Pending plan: undefined
‚úÖ REDIRECTING TO: /dashboard.html?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjOWZmMjc1Yi00NWYwLTRkNGItOTBjOC01NWFjOTg4MTllNDMiLCJlbWFpbCI6InBlcnN5bG9wZXo5QGdtYWlsLmNvbSIsInJvbGUiOiJ1c2VyIiwiaWF0IjoxNzYyMjE0MzY3LCJleHAiOjE3NjI4MTkxNjd9.T1FLtOsXZrK97cCk80Ql6yimB_FoKZDeq7K_JOgYMTE
üöÄ User should now land on dashboard!
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 18,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 18,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
Query executed: {
  text: '\n' +
    '      SELECT \n' +
    '        id, subdomain, template_id, status, plan, \n' +
    '        published_at, created_at, ',
  duration: 19,
  rows: 0
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 20,
  rows: 1
}
Query executed: {
  text: 'SELECT id, email, role, status, subscription_status, subscription_plan FROM users WHERE id = $1',
  duration: 19,
  rows: 1
}
